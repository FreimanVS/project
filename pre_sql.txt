DROP TABLE IF EXISTS employee_position;
DROP TABLE IF EXISTS employee_role;
DROP TABLE IF EXISTS employee;
DROP TABLE IF EXISTS position;
DROP TABLE IF EXISTS role;

CREATE TABLE IF NOT EXISTS company.employee (
id BIGINT NOT NULL AUTO_INCREMENT,
login VARCHAR(100) NOT NULL,
password VARCHAR(100) NOT NULL,
fio VARCHAR(100) NOT NULL,
department VARCHAR(100) NOT NULL,
city VARCHAR(100) NOT NULL,
salary DOUBLE NOT NULL,
phoneNumber VARCHAR(50) NOT NULL,
email VARCHAR(100) NOT NULL,
PRIMARY KEY (id),
CONSTRAINT uniqEmployee UNIQUE (login)
)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COLLATE = utf8_general_ci;

CREATE TABLE IF NOT EXISTS company.role (
id BIGINT NOT NULL AUTO_INCREMENT,
name VARCHAR(100) NOT NULL,
PRIMARY KEY (id),
CONSTRAINT uniqRole UNIQUE (name)
)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COLLATE = utf8_general_ci;

CREATE TABLE IF NOT EXISTS company.employee_role (
employeeId BIGINT NOT NULL,
roleId BIGINT NOT NULL,
PRIMARY KEY (employeeId, roleId),
CONSTRAINT fk_employee_role_employeeId FOREIGN KEY (employeeId) REFERENCES employee(id),
CONSTRAINT fk_employee_role_roleId FOREIGN KEY (roleId) REFERENCES role(id)
)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COLLATE = utf8_general_ci;

CREATE TABLE IF NOT EXISTS company.position (
id BIGINT NOT NULL AUTO_INCREMENT,
name VARCHAR(100) NOT NULL,
PRIMARY KEY (id),
CONSTRAINT uniqPosition UNIQUE (name)
)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COLLATE = utf8_general_ci;

CREATE TABLE IF NOT EXISTS company.employee_position (
employeeId BIGINT NOT NULL,
positionId BIGINT NOT NULL,
PRIMARY KEY (employeeId, positionId),
CONSTRAINT fk_employee_position_employeeId FOREIGN KEY (employeeId) REFERENCES employee(id),
CONSTRAINT fk_employee_position_positionId FOREIGN KEY (positionId) REFERENCES company.position(id)
)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COLLATE = utf8_general_ci;